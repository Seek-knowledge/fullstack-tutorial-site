(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{263:function(t,e,_){"use strict";_.r(e);var r=_(0),v=Object(r.a)({},function(){var t=this,e=t.$createElement,_=t._self._c||e;return _("div",{staticClass:"content"},[t._m(0),t._v(" "),t._m(1),t._v(" "),t._m(2),t._v(" "),_("p",[t._v("REST (Representational State Transfer)，中文意思是：表述性状态转移。")]),t._v(" "),_("p",[t._v("一组架构约束条件和原则")]),t._v(" "),_("p",[t._v("如果一个架构符合 REST 的约束条件和原则，我们就称它为 RESTful 架构")]),t._v(" "),t._m(3),t._v(" "),t._m(4),t._v(" "),t._m(5),t._v(" "),_("p",[t._v("要理解RESTful架构，需要理解Representational State Transfer这个词组到底是什么意思，它的每一个词都有些什么涵义。")]),t._v(" "),_("p",[t._v("下面我们结合REST原则，围绕资源展开讨论，从资源的定义、获取、表述、关联、状态变迁等角度，列举一些关键概念并加以解释。")]),t._v(" "),t._m(6),t._v(" "),t._m(7),t._v(" "),t._m(8),t._v(" "),t._m(9),t._v(" "),t._m(10),t._v(" "),t._m(11),t._v(" "),_("p",[t._v("上面提到，客户端通过 HTTP 方法可以获取资源，是吧? 不，确切的说，客户端获取的只是资源的表述而已。资源在外界的具体呈现，可以有多种表述(或成为表现、表示)形式，在客户端和服务端之间传送的也是资源的表述，而不是资源本身。 例如文本资源可以采用 html、xml、json 等格式，图片可以使用 PNG 或 JPG 展现出来。")]),t._v(" "),_("p",[t._v('资源的表述包括数据和描述数据的元数据，例如，HTTP 头 "Content-Type" 就是这样一个元数据属性。')]),t._v(" "),_("p",[t._v("那么客户端如何知道服务端提供哪种表述形式呢？")]),t._v(" "),_("p",[t._v("答案是可以通过 HTTP 内容协商，客户端可以通过 Accept 头请求一种特定格式的表述，服务端则通过 Content-Type 告诉客户端资源的表述形式。")]),t._v(" "),_("p",[t._v("MIME 类型")]),t._v(" "),_("p",[t._v("accept: text/xml   html文件")]),t._v(" "),_("p",[t._v("Content-Type告诉客户端资源的表述形式")]),t._v(" "),t._m(12),t._v(" "),_("p",[t._v("超媒体即应用状态引擎（可以做多层链接）")]),t._v(" "),_("p",[t._v("https://api.github.com/repos/github")]),t._v(" "),t._m(13),t._m(14),t._v(" "),_("p",[t._v("服务器端不应该保存客户端状态。")]),t._v(" "),_("p",[t._v("应用状态 -> 服务器端不保存应用状态")]),t._v(" "),_("p",[t._v("访问订单   根据接口去查询")]),t._v(" "),_("p",[t._v("访问商品   查询")]),t._v(" "),t._m(15),t._v(" "),_("p",[t._v("以豆瓣网为例")]),t._v(" "),_("ol",[t._m(16),t._v(" "),t._m(17),t._v(" "),t._m(18),t._v(" "),_("li",[t._m(19),t._v(" "),_("p",[_("strong",[t._v("GET")]),t._v("（select）：从服务器取出资源（一项或多项）。\neg. 获取图书信息  【GET】 "),_("a",{attrs:{href:"http://api.douban.com/v2/book/:id",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://api.douban.com/v2/book/:id"),_("OutboundLink")],1)]),t._v(" "),_("p",[_("strong",[t._v("POST")]),t._v("（create）：在服务器新建一个资源。\neg. 用户收藏某本图书  【POST】 "),_("a",{attrs:{href:"http://api.douban.com/v2/book/:id/collection",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://api.douban.com/v2/book/:id/collection"),_("OutboundLink")],1)]),t._v(" "),_("p",[_("strong",[t._v("PUT")]),t._v("（update）：在服务器更新资源（客户端提供改变后的完整资源）。\neg. 用户修改对某本图书的收藏  【PUT】 "),_("a",{attrs:{href:"http://api.douban.com/v2/book/:id/collection",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://api.douban.com/v2/book/:id/collection"),_("OutboundLink")],1)]),t._v(" "),_("p",[_("strong",[t._v("DELETE")]),t._v("（delete）：从服务器删除资源。\neg. 用户删除某篇笔记  【DELETE】 "),_("a",{attrs:{href:"http://api.douban.com/v2/book/annotation/:id",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://api.douban.com/v2/book/annotation/:id"),_("OutboundLink")],1)])]),t._v(" "),_("li",[_("p",[t._v("如果记录数量很多，服务器不可能都将它们返回给用户。API应该提供参数，过滤返回结果")]),t._v(" "),_("p",[_("code",[t._v("?limit=10")]),t._v("：指定返回记录的数量\neg. 获取图书信息  【GET】 "),_("a",{attrs:{href:"http://api.douban.com/v2/book/:id",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://api.douban.com/v2/book/:id"),_("OutboundLink")],1),_("code",[t._v("?limit=10")])])]),t._v(" "),t._m(20)]),t._v(" "),t._m(21),t._v(" "),_("ul",[_("li",[_("a",{attrs:{href:"https://www.runoob.com/w3cnote/restful-architecture.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("RESTful 架构详解 | 菜鸟教程"),_("OutboundLink")],1)]),t._v(" "),_("li",[_("a",{attrs:{href:"http://www.ruanyifeng.com/blog/2014/05/restful_api.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("RESTful API 设计指南 - 阮一峰的网络日志"),_("OutboundLink")],1)])])])},[function(){var t=this,e=t.$createElement,_=t._self._c||e;return _("ul",[_("li",[_("a",{attrs:{href:"#restful-%E6%9E%B6%E6%9E%84%E8%AF%A6%E8%A7%A3"}},[t._v("RESTful 架构详解")]),t._v(" "),_("ul",[_("li",[_("a",{attrs:{href:"#1-%E4%BB%80%E4%B9%88%E6%98%AFrest"}},[t._v("1. 什么是REST")])]),t._v(" "),_("li",[_("a",{attrs:{href:"#2-restful%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"}},[t._v("2. RESTful的基本概念")])]),t._v(" "),_("li",[_("a",{attrs:{href:"#3-%E7%90%86%E8%A7%A3restful"}},[t._v("3. 理解RESTful")]),t._v(" "),_("ul",[_("li",[_("a",{attrs:{href:"#31-%E8%B5%84%E6%BA%90%E5%92%8Curi"}},[t._v("3.1 资源和URI")])]),t._v(" "),_("li",[_("a",{attrs:{href:"#32-%E7%BB%9F%E4%B8%80%E8%B5%84%E6%BA%90%E6%8E%A5%E5%8F%A3"}},[t._v("3.2 统一资源接口")])]),t._v(" "),_("li",[_("a",{attrs:{href:"#33-%E8%B5%84%E6%BA%90%E8%A1%A8%E8%BF%B0"}},[t._v("3.3 资源表述")])]),t._v(" "),_("li",[_("a",{attrs:{href:"#34-%E8%B5%84%E6%BA%90%E7%9A%84%E9%93%BE%E6%8E%A5"}},[t._v("3.4 资源的链接")])]),t._v(" "),_("li",[_("a",{attrs:{href:"#35-%E7%8A%B6%E6%80%81%E8%BD%AC%E7%A7%BB"}},[t._v("3.5 状态转移")])])])]),t._v(" "),_("li",[_("a",{attrs:{href:"#4-restful%E7%9A%84%E6%9C%80%E4%BD%B3%E8%AE%BE%E8%AE%A1"}},[t._v("4. RESTful的最佳设计")])])])]),t._v(" "),_("li",[_("a",{attrs:{href:"#%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99"}},[t._v("参考资料")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h1",{attrs:{id:"restful-架构详解"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#restful-架构详解","aria-hidden":"true"}},[this._v("#")]),this._v(" RESTful 架构详解")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"_1-什么是rest"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-什么是rest","aria-hidden":"true"}},[this._v("#")]),this._v(" 1. 什么是REST")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"_2-restful的基本概念"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-restful的基本概念","aria-hidden":"true"}},[this._v("#")]),this._v(" 2. RESTful的基本概念")])},function(){var t=this.$createElement,e=this._self._c||t;return e("ol",[e("li",[this._v("在 REST 中，一切的内容都被认为是一种资源")]),this._v(" "),e("li",[this._v("每个资源都由 URI 唯一标识")]),this._v(" "),e("li",[this._v("使用统一的接口处理资源请求（POST/GET/PUT/DELETE/HEAD）")]),this._v(" "),e("li",[this._v("无状态（每次请求之前是无关联，没有 session ）")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"_3-理解restful"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-理解restful","aria-hidden":"true"}},[this._v("#")]),this._v(" 3. 理解RESTful")])},function(){var t=this,e=t.$createElement,_=t._self._c||e;return _("ul",[_("li",[t._v("资源与URI")]),t._v(" "),_("li",[t._v("统一资源接口")]),t._v(" "),_("li",[t._v("资源的表述")]),t._v(" "),_("li",[t._v("资源的链接")]),t._v(" "),_("li",[t._v("状态的转移")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"_3-1-资源和uri"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-资源和uri","aria-hidden":"true"}},[this._v("#")]),this._v(" 3.1 资源和URI")])},function(){var t=this,e=t.$createElement,_=t._self._c||e;return _("ol",[_("li",[t._v("使用 "),_("code",[t._v("/")]),t._v(" 来表示资源的层级关系")]),t._v(" "),_("li",[t._v("使用 "),_("code",[t._v("?")]),t._v(" 用来过滤资源")]),t._v(" "),_("li",[t._v("使用 "),_("code",[t._v("_")]),t._v(" 或者 "),_("code",[t._v("-")]),t._v(" 让URI的可读性更好")]),t._v(" "),_("li",[_("code",[t._v(",")]),t._v(" 或 "),_("code",[t._v(";")]),t._v(" 可以用来表示同级资源的关系")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"_3-2-统一资源接口"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-统一资源接口","aria-hidden":"true"}},[this._v("#")]),this._v(" 3.2 统一资源接口")])},function(){var t=this,e=t.$createElement,_=t._self._c||e;return _("table",[_("thead",[_("tr",[_("th",[t._v("请求方法")]),t._v(" "),_("th",[t._v("描述")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[t._v("GET")]),t._v(" "),_("td",[t._v("获取某个资源。 幂等（取多少次结果都没有变化）")])]),t._v(" "),_("tr",[_("td",[t._v("POST")]),t._v(" "),_("td",[t._v("创建一个新的资源")])]),t._v(" "),_("tr",[_("td",[t._v("PUT")]),t._v(" "),_("td",[t._v("替换某个已有的资源（更新操作） ， 幂等（更新多次只保存一个结果）")])]),t._v(" "),_("tr",[_("td",[t._v("DELETE")]),t._v(" "),_("td",[t._v("删除某个资源")])]),t._v(" "),_("tr",[_("td",[t._v("HEAD")]),t._v(" "),_("td",[t._v("主要用于确认 URL 的有效性以及资源更新的日期时间等")])]),t._v(" "),_("tr",[_("td",[t._v("PATCH")]),t._v(" "),_("td",[t._v("新引入的，对PUT方法的补充，用来对已知资源进行局部更新")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"_3-3-资源表述"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-资源表述","aria-hidden":"true"}},[this._v("#")]),this._v(" 3.3 资源表述")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"_3-4-资源的链接"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-4-资源的链接","aria-hidden":"true"}},[this._v("#")]),this._v(" 3.4 资源的链接")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v('{\n  "message": "Not Found",\n  "documentation_url": "https://developer.github.com/v3"\n}\n')])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"_3-5-状态转移"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-5-状态转移","aria-hidden":"true"}},[this._v("#")]),this._v(" 3.5 状态转移")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"_4-restful的最佳设计"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-restful的最佳设计","aria-hidden":"true"}},[this._v("#")]),this._v(" 4. RESTful的最佳设计")])},function(){var t=this.$createElement,e=this._self._c||t;return e("li",[e("p",[this._v("应该尽量将 API 部署在专用域名之下\n"),e("code",[this._v("http://api.douban.com")]),this._v("/v2/user/1000001?apikey=XXX")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("li",[e("p",[this._v("应该将 API 的版本号放入 URL\n"),e("code",[this._v("http://api.douban.com/v2")]),this._v("/user/1000001?apikey=XXX")])])},function(){var t=this,e=t.$createElement,_=t._self._c||e;return _("li",[_("p",[t._v("在 RESTful 架构中，每个网址代表一种资源（resource），所以网址中不能有动词，只能有名词，而且所用的名词往往与数据库的表格名对应。一般来说，数据库中的表都是同种记录的 ”集合”（collection），所以 API 中的名词也应该使用复数。")]),t._v(" "),_("p",[t._v("http://api.douban.com/v2/"),_("code",[t._v("book")]),t._v("/:id (获取图书信息)")]),t._v(" "),_("p",[t._v("http://api.douban.com/v2/"),_("code",[t._v("movie")]),t._v("/subject/:id (电影条目信息)")]),t._v(" "),_("p",[t._v("http://api.douban.com/v2/"),_("code",[t._v("music")]),t._v("/:id (获取音乐信息)")]),t._v(" "),_("p",[t._v("http://api.douban.com/v2/"),_("code",[t._v("event")]),t._v("/:id (获取同城活动)")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("对于资源的具体操作类型，由 HTTP 动词表示。常用的 HTTP 动词有下面四个(对应 "),e("strong",[this._v("增/删/改/查")]),this._v(" )。")])},function(){var t=this,e=t.$createElement,_=t._self._c||e;return _("li",[_("p",[t._v("服务器向用户返回的状态码和提示信息\n每个状态码代表不同意思, 就像代号一样")]),t._v(" "),_("p",[t._v("HTTP状态码")]),t._v(" "),_("ul",[_("li",[_("p",[t._v("1系 信息")])]),t._v(" "),_("li",[_("p",[t._v("2系 正常返回")])]),t._v(" "),_("li",[_("p",[t._v("3系 重定向")])]),t._v(" "),_("li",[_("p",[t._v("4系 数据异常")])]),t._v(" "),_("li",[_("p",[t._v("5系 服务器异常")])])]),t._v(" "),_("p",[t._v("业务状态码")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h1",{attrs:{id:"参考资料"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#参考资料","aria-hidden":"true"}},[this._v("#")]),this._v(" 参考资料")])}],!1,null,null,null);v.options.__file="RESTful API.md";e.default=v.exports}}]);